<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>test map</title>
    <link rel="stylesheet" type="text/css" href="node_modules/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="index.css">
</head>

<body>
    <!-- https://mapshaper.org/ -->
    <!-- 啟動專案: http-server . -->
    <!-- 整個專案做完記得跑 npm uninstall http-server -->
    <!-- data: https://data.gov.tw/dataset/7442 -->
    <!-- data: https://opendata.cwb.gov.tw/devManual/insrtuction -->
    <!-- readme pdf: https://opendata.cwb.gov.tw/opendatadoc/CWB_Opendata_API_V1.2.pdf -->
    <div class="row" id="app">
        <span class="cloud1"></span>
        <span class="cloud2"></span>
        <div class="col-10 offset-1">
            <div class="title">
                天氣api (update every 5 seconds)
                <br>
                => 台灣各縣市目前降雨量百分比分配圖(0 ~ 100%)
            </div>
            <div class="row">
                <div class="col-xl-8">
                    <div class="map-detail">
                        <div class="color-detail">
                            雨量色階
                            <div class="color-scale"></div>
                        </div>
                    </div>
                </div>
                <div class="col-xl-4">
                    <div class="city-detail row">
                        <div class="col-12 weather-section-city">
                            目前所在:
                            <div class="city"></div>
                        </div>
                        <div class="weather-detail">
                            <div class="col-12 weather-section-detail">
                                降雨機率:
                                <div class="percent"></div>
                                溫度:
                                <div class="temperture"></div>
                                描述:
                                <div class="description"></div>
                            </div>
                            <div class="col-12 weather-section-detail">
                                降雨機率:
                                <div class="percent"></div>
                                溫度:
                                <div class="temperture"></div>
                                描述:
                                <div class="description"></div>
                            </div>
                            <div class="col-12 weather-section-detail">
                                降雨機率:
                                <div class="percent"></div>
                                溫度:
                                <div class="temperture"></div>
                                描述:
                                <div class="description"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="node_modules/jquery/dist/jquery.min.js"></script>
    <script src="node_modules/d3/d3.min.js"></script>
    <script src="variable.js"></script>
    <script src="index.js"></script>
    <script type="text/javascript">
    $(function() {

        d3.json("country.json", function(error, geo) {
            if (error) {
                return console.error(error);
            }
            console.log('success');
            console.log(geo.features);

            var geoGenerator = initMap();

            initScale();

            renderMap(geo, geoGenerator);

            setInterval(function() {
                renderMap(geo, geoGenerator);
            }, 5000);

        });

    });
    </script>
</body>

</html>